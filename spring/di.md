# DI (Dependency Injection : 의존성 주입)

> **의존성 주입**은 제어의 역행이 일어날 때 스프링이 내부에 있는 **객체들간의 관계를 관리할 때 > 사용하는 기법**이다.
> 
> 자바에서는 일반적으로 인터페이스를 이용해서 의존적인 객체의 관계를 최대한 유연하게 처리할 수 있도록 한다.
> 
> 의존성 주입은 말 그대로 **의존적인 객체를 직접 생성하거나 제어하는 것이 아니라, 
> 
> 특정 객체에 필요한 객체를 외부에서 결정해서 연결**시키는 것을 의미한다.
> 
> 즉, 우리는 클래스의 기능을 추상적으로 묶어둔 **인터페이스를 갖다 쓰면 되는 것**이다.
> 
> 나머지는 스프링에서 객체를 주입해주기 때문이다.
> 
> 따라서 이러한 의존성 주입으로 인해 **모듈 간의 결합도가 낮아지고 유연성이 높아진다.**

- 객체 자체가 아니라 Framework에 의해 객체의 의존성이 주입되는 설계 패턴

- Framework에 의해 동적으로 주입되므로 여러 객체 간의 결합이며, Dependency Injection은 Spring Framework에서 지원하는 IoC의 형태로 클래스 간의 의존관계를 빈 설정 정보를 바탕으로 컨테이너가 자동으로 연결해주는 것.

- [[Container]](./container.md)가 [[bean]](./bean.md) 객체를 생성하고 종속성 주입 수행

### DI를 사용하는 이유
- 객체 내부에서 다른 객체를 생성하는 것은 강한 결합도를 가지는 구조. 객체를 주입받는 다는 것은 외부에서 생성된 객체를 인터페이스를 통해서 넘겨받는 것이기 때문에 결합도를 낮출 수 있고, 런타임시에 의존관계가 결정되기 때문에 유연한 구조를 가짐.
- new를 통해 직접 객체를 생성할 경우, 내용을 수정할 때 코드를 수정해야 함. 하지만, DI를 사용할 경우, 이를 정의하고 있는 파일만 수정하면 됨.

### 스프링 DI 주입방식
1. XML 구성 파일을 생성하여 주입하는 방식

    - XML 구성 파일을 생성하여 설정 값을 입력하고 기능을 사용하고자 하는 클래스에서 불러 사용하는 방식.

    - XML 구성 파일을 수정하면 자바 코드를 최대한 수정하지 않기 때문에 재컴파일하지 않더라도 변경사항 쉽게 적용함.

    - 모델 클래스, 서버 클래스, XML 설정 파일이 분산되어 있어, 데이터 처리정보를 확인하기 위해서는 3파일 모두 봐야됨.

2. 자바 파일을 생성하여 주입하는 방식

    - 어노테이션을 이용하는 방식.

    - @Configuration 어노테이션으로 주입하고자 하는 클래스 이름 설정하고, @Bean 어노테이션으로 Bean 객체 주입.

    - 데이터에 대한 유효성을 모델클래스에 직접 명시하기 때문에 컴파일 시 바로 확인이 가능함.

    - 자바 클래스로 생성된 구성파일은 컴파일 될 시, 내부적으로 XML 파일 형식으로 변경되어 주입하게 됨.

3. 자바 파일과 XML 파일 두 가지를 사용하여 주입하는 방식

    - 자바 구성 파일에 XML 파일을 import 하는 방식

    - XML 파일에 자바 파일을 가지고 와서 XML 파일을 주입하는 방식